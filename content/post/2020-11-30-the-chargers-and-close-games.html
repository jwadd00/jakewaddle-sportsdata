---
title: The Chargers and Close Games
author: Jake Waddle
date: '2020-11-30'
slug: the-chargers-and-close-games
categories:
  - R
  - Python
tags:
  - NFL
  - Chargers
description: ''
topics: []
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<div id="los-angeles-chargers-fandom" class="section level1">
<h1>Los Angeles Chargers Fandom</h1>
<p>I have been a Chargers fan for 20 years. Now that that’s out of the way can you think of a team, during the last few years, that has blown leads or made near-comebacks at the rate that this franchise has? It seems as if every other game winds up dwindling down to one possession. It’s been written about with some frequency that this team finds a way to grind out a close loss. But how does their close game frequency stack up against the rest of the league? Do the Chargers lose their close games at a wildly higher rate? Below, we will mix up some R and Python and try to find out.</p>
</div>
<div id="get-ready" class="section level1">
<h1>Get Ready</h1>
<p>I typically rely on R to do everything, but this post will use a fair amount of Python. If you would like to follow along, you’ll need to be prepared to use Python and should consider a consult with the <code>reticulate</code> documentation.</p>
<pre class="r"><code>library(tidyverse)
library(reticulate)
library(rvest)
library(janitor)

# force python chunks to use anaconda install
use_condaenv(&quot;anaconda3&quot;, required = TRUE)</code></pre>
</div>
<div id="finding-a-game-log" class="section level1">
<h1>Finding a Game Log</h1>
<p>In order to compare close game rates between NFL teams, we’ll need to find a source for historical scores. <a href="&#39;https://www.pro-football-reference.com/teams/sdg/2020/gamelog.html&#39;">Pro Football Reference</a> looks to contain the information we need. Inspecting the HTML in a browser, you can see the table class id is “gamelog2020”. With the <code>rvest</code> package, we can parse the html and search xpaths for "//*<span class="citation">[@id="gamelog2020"]</span>". We’ll rely on the <code>html_table()</code> function to return a list of child tables (which should result in 1 table).</p>
<pre class="r"><code>url &lt;- &#39;https://www.pro-football-reference.com/teams/sdg/2020/gamelog.html&#39;

url %&gt;% 
  read_html() %&gt;% 
  html_nodes(xpath = &#39;//*[@id=&quot;gamelog2020&quot;]&#39;) %&gt;%
  html_table() %&gt;% 
  .[[1]] %&gt;% 
  clean_names() %&gt;% 
  glimpse()</code></pre>
<pre><code>## Rows: 17
## Columns: 36
## $ x          &lt;chr&gt; &quot;Week&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10&quot;, &quot;1...
## $ x_2        &lt;chr&gt; &quot;Day&quot;, &quot;Sun&quot;, &quot;Sun&quot;, &quot;Sun&quot;, &quot;Sun&quot;, &quot;Mon&quot;, &quot;Sun&quot;, &quot;Sun&quot;, ...
## $ x_3        &lt;chr&gt; &quot;Date&quot;, &quot;September 13&quot;, &quot;September 20&quot;, &quot;September 27&quot;, ...
## $ x_4        &lt;chr&gt; &quot;&quot;, &quot;boxscore&quot;, &quot;boxscore&quot;, &quot;boxscore&quot;, &quot;boxscore&quot;, &quot;box...
## $ x_5        &lt;chr&gt; &quot;&quot;, &quot;W&quot;, &quot;L&quot;, &quot;L&quot;, &quot;L&quot;, &quot;L&quot;, &quot;W&quot;, &quot;L&quot;, &quot;L&quot;, &quot;L&quot;, &quot;W&quot;, &quot;L...
## $ x_6        &lt;chr&gt; &quot;OT&quot;, &quot;&quot;, &quot;OT&quot;, &quot;&quot;, &quot;&quot;, &quot;OT&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;...
## $ x_7        &lt;chr&gt; &quot;&quot;, &quot;@&quot;, &quot;&quot;, &quot;&quot;, &quot;@&quot;, &quot;@&quot;, &quot;&quot;, &quot;@&quot;, &quot;&quot;, &quot;@&quot;, &quot;&quot;, &quot;@&quot;, &quot;&quot;...
## $ x_8        &lt;chr&gt; &quot;Opp&quot;, &quot;Cincinnati Bengals&quot;, &quot;Kansas City Chiefs&quot;, &quot;Caro...
## $ score      &lt;chr&gt; &quot;Tm&quot;, &quot;16&quot;, &quot;20&quot;, &quot;16&quot;, &quot;31&quot;, &quot;27&quot;, &quot;39&quot;, &quot;30&quot;, &quot;26&quot;, &quot;2...
## $ score_2    &lt;chr&gt; &quot;Opp&quot;, &quot;13&quot;, &quot;23&quot;, &quot;21&quot;, &quot;38&quot;, &quot;30&quot;, &quot;29&quot;, &quot;31&quot;, &quot;31&quot;, &quot;...
## $ passing    &lt;chr&gt; &quot;Cmp&quot;, &quot;16&quot;, &quot;22&quot;, &quot;35&quot;, &quot;20&quot;, &quot;20&quot;, &quot;28&quot;, &quot;29&quot;, &quot;28&quot;, &quot;...
## $ passing_2  &lt;chr&gt; &quot;Att&quot;, &quot;30&quot;, &quot;33&quot;, &quot;49&quot;, &quot;25&quot;, &quot;34&quot;, &quot;44&quot;, &quot;44&quot;, &quot;42&quot;, &quot;...
## $ passing_3  &lt;chr&gt; &quot;Yds&quot;, &quot;207&quot;, &quot;296&quot;, &quot;319&quot;, &quot;278&quot;, &quot;239&quot;, &quot;349&quot;, &quot;275&quot;, ...
## $ passing_4  &lt;chr&gt; &quot;TD&quot;, &quot;0&quot;, &quot;1&quot;, &quot;1&quot;, &quot;3&quot;, &quot;4&quot;, &quot;3&quot;, &quot;3&quot;, &quot;2&quot;, &quot;2&quot;, &quot;3&quot;, ...
## $ passing_5  &lt;chr&gt; &quot;Int&quot;, &quot;0&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;0&quot;, &quot;0&quot;, &quot;2&quot;, &quot;0&quot;, &quot;1&quot;, &quot;0&quot;,...
## $ passing_6  &lt;chr&gt; &quot;Sk&quot;, &quot;2&quot;, &quot;2&quot;, &quot;2&quot;, &quot;2&quot;, &quot;3&quot;, &quot;1&quot;, &quot;2&quot;, &quot;2&quot;, &quot;2&quot;, &quot;3&quot;, ...
## $ passing_7  &lt;chr&gt; &quot;Yds&quot;, &quot;1&quot;, &quot;15&quot;, &quot;11&quot;, &quot;12&quot;, &quot;25&quot;, &quot;2&quot;, &quot;3&quot;, &quot;14&quot;, &quot;13&quot;...
## $ passing_8  &lt;chr&gt; &quot;Y/A&quot;, &quot;6.9&quot;, &quot;9.4&quot;, &quot;6.7&quot;, &quot;11.6&quot;, &quot;7.8&quot;, &quot;8.0&quot;, &quot;6.3&quot;,...
## $ passing_9  &lt;chr&gt; &quot;NY/A&quot;, &quot;6.5&quot;, &quot;8.5&quot;, &quot;6.3&quot;, &quot;10.3&quot;, &quot;6.5&quot;, &quot;7.8&quot;, &quot;6.0&quot;...
## $ passing_10 &lt;chr&gt; &quot;Cmp%&quot;, &quot;53.3&quot;, &quot;66.7&quot;, &quot;71.4&quot;, &quot;80.0&quot;, &quot;58.8&quot;, &quot;63.6&quot;, ...
## $ passing_11 &lt;chr&gt; &quot;Rate&quot;, &quot;75.3&quot;, &quot;92.5&quot;, &quot;87.0&quot;, &quot;135.9&quot;, &quot;119.6&quot;, &quot;110.9...
## $ rushing    &lt;chr&gt; &quot;Att&quot;, &quot;39&quot;, &quot;44&quot;, &quot;23&quot;, &quot;23&quot;, &quot;32&quot;, &quot;32&quot;, &quot;38&quot;, &quot;31&quot;, &quot;...
## $ rushing_2  &lt;chr&gt; &quot;Yds&quot;, &quot;155&quot;, &quot;183&quot;, &quot;117&quot;, &quot;46&quot;, &quot;111&quot;, &quot;135&quot;, &quot;210&quot;, &quot;...
## $ rushing_3  &lt;chr&gt; &quot;Y/A&quot;, &quot;4.0&quot;, &quot;4.2&quot;, &quot;5.1&quot;, &quot;2.0&quot;, &quot;3.5&quot;, &quot;4.2&quot;, &quot;5.5&quot;, ...
## $ rushing_4  &lt;chr&gt; &quot;TD&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;0&quot;, &quot;0&quot;, &quot;2&quot;, &quot;0&quot;, &quot;1&quot;, &quot;1&quot;, &quot;0&quot;, ...
## $ scoring    &lt;chr&gt; &quot;FGM&quot;, &quot;3&quot;, &quot;2&quot;, &quot;1&quot;, &quot;1&quot;, &quot;0&quot;, &quot;2&quot;, &quot;3&quot;, &quot;2&quot;, &quot;0&quot;, &quot;2&quot;,...
## $ scoring_2  &lt;chr&gt; &quot;FGA&quot;, &quot;4&quot;, &quot;2&quot;, &quot;1&quot;, &quot;2&quot;, &quot;1&quot;, &quot;3&quot;, &quot;3&quot;, &quot;3&quot;, &quot;0&quot;, &quot;2&quot;,...
## $ scoring_3  &lt;chr&gt; &quot;XPM&quot;, &quot;1&quot;, &quot;2&quot;, &quot;1&quot;, &quot;4&quot;, &quot;3&quot;, &quot;3&quot;, &quot;3&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;,...
## $ scoring_4  &lt;chr&gt; &quot;XPA&quot;, &quot;1&quot;, &quot;2&quot;, &quot;1&quot;, &quot;4&quot;, &quot;4&quot;, &quot;4&quot;, &quot;3&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;,...
## $ punting    &lt;chr&gt; &quot;Pnt&quot;, &quot;5&quot;, &quot;3&quot;, &quot;3&quot;, &quot;3&quot;, &quot;7&quot;, &quot;4&quot;, &quot;3&quot;, &quot;3&quot;, &quot;5&quot;, &quot;3&quot;,...
## $ punting_2  &lt;chr&gt; &quot;Yds&quot;, &quot;244&quot;, &quot;131&quot;, &quot;119&quot;, &quot;160&quot;, &quot;339&quot;, &quot;138&quot;, &quot;117&quot;, ...
## $ downs      &lt;chr&gt; &quot;3DConv&quot;, &quot;6&quot;, &quot;6&quot;, &quot;10&quot;, &quot;4&quot;, &quot;8&quot;, &quot;6&quot;, &quot;7&quot;, &quot;7&quot;, &quot;4&quot;, ...
## $ downs_2    &lt;chr&gt; &quot;3DAtt&quot;, &quot;16&quot;, &quot;13&quot;, &quot;15&quot;, &quot;10&quot;, &quot;17&quot;, &quot;14&quot;, &quot;16&quot;, &quot;15&quot;,...
## $ downs_3    &lt;chr&gt; &quot;4DConv&quot;, &quot;0&quot;, &quot;1&quot;, &quot;0&quot;, &quot;1&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;2&quot;, &quot;2&quot;, &quot;...
## $ downs_4    &lt;chr&gt; &quot;4DAtt&quot;, &quot;2&quot;, &quot;2&quot;, &quot;0&quot;, &quot;1&quot;, &quot;1&quot;, &quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;1...
## $ x_9        &lt;chr&gt; &quot;ToP&quot;, &quot;30:10&quot;, &quot;39:27&quot;, &quot;31:11&quot;, &quot;25:05&quot;, &quot;30:42&quot;, &quot;34:...</code></pre>
<div id="data-wrangle" class="section level2">
<h2>Data Wrangle</h2>
</div>
</div>
